(function(u){"function"===typeof define&&define.amd?define(["jquery"],u):u(window.jQuery)})(function(u){"function"!==typeof Array.prototype.reduce&&(Array.prototype.reduce=function(p,d){var e,a=this.length>>>0,g=!1;if(1<arguments.length){var l=d;g=!0}for(e=0;a>e;++e)this.hasOwnProperty(e)&&(g?l=p(l,this[e],e,this):(l=this[e],g=!0));if(!g)throw new TypeError("Reduce of empty array with no initial value");return l});var W="function"===typeof define&&define.amd,L={isMac:-1<navigator.appVersion.indexOf("Mac"),
isMSIE:-1<navigator.userAgent.indexOf("MSIE")||-1<navigator.userAgent.indexOf("Trident"),isFF:-1<navigator.userAgent.indexOf("Firefox"),jqueryVersion:parseFloat(u.fn.jquery),isSupportAmd:W,hasCodeMirror:W?require.specified("CodeMirror"):!!window.CodeMirror,isFontInstalled:function(p){var d="Comic Sans MS"===p?"Courier New":"Comic Sans MS",e=u("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),a=e.css("fontFamily",d).width();
p=e.css("fontFamily",p+","+d).width();e.remove();return a!==p},isW3CRangeSupport:!!document.createRange},R=function(){var p=0;return{eq:function(d){return function(e){return d===e}},eq2:function(d,e){return d===e},ok:function(){return!0},fail:function(){return!1},self:function(d){return d},not:function(d){return function(){return!d.apply(d,arguments)}},and:function(d,e){return function(a){return d(a)&&e(a)}},uniqueId:function(d){var e=++p+"";return d?d+e:e},rect2bnd:function(d){var e=u(document);
return{top:d.top+e.scrollTop(),left:d.left+e.scrollLeft(),width:d.right-d.left,height:d.bottom-d.top}},invertObject:function(d){var e={},a;for(a in d)d.hasOwnProperty(a)&&(e[d[a]]=a);return e}}}(),M=function(){var p=function(e){return e[e.length-1]},d=function(e){return e.slice(1)};return{head:function(e){return e[0]},last:p,initial:function(e){return e.slice(0,e.length-1)},tail:d,prev:function(e,a){var g=e.indexOf(a);return-1===g?null:e[g-1]},next:function(e,a){var g=e.indexOf(a);return-1===g?null:
e[g+1]},contains:function(e,a){return-1!==e.indexOf(a)},all:function(e,a){for(var g=0,l=e.length;g<l;g++)if(!a(e[g]))return!1;return!0},sum:function(e,a){a=a||R.self;return e.reduce(function(g,l){return g+a(l)},0)},from:function(e){for(var a=[],g=-1,l=e.length;++g<l;)a[g]=e[g];return a},clusterBy:function(e,a){return e.length?d(e).reduce(function(g,l){var v=p(g);a(p(v),l)?v[v.length]=l:g[g.length]=[l];return g},[[e[0]]]):[]},compact:function(e){for(var a=[],g=0,l=e.length;g<l;g++)e[g]&&a.push(e[g]);
return a},unique:function(e){for(var a=[],g=0,l=e.length;g<l;g++)-1===a.indexOf(e[g])&&a.push(e[g]);return a}}}(),aa=String.fromCharCode(160),r=function(){var p=function(b){return b&&u(b).hasClass("note-editable")},d=function(b){b=b.toUpperCase();return function(y){return y&&y.nodeName.toUpperCase()===b}},e=function(b){return b&&3===b.nodeType},a=function(b){return p(b)?!1:b&&/^DIV|^P|^LI|^H[1-7]/.test(b.nodeName.toUpperCase())},g=function(b){return!m(b)&&!l(b)&&!a(b)},l=function(b){return b&&/^UL|^OL/.test(b.nodeName.toUpperCase())},
v=function(b){return b&&/^TD|^TH/.test(b.nodeName.toUpperCase())},f=d("BLOCKQUOTE"),m=function(b){return v(b)||f(b)||p(b)},k=d("A"),t=function(b){return e(b)?b.nodeValue.length:b.childNodes.length},D=function(b){var y=t(b);return 0===y||!r.isText(b)&&1===y&&""===b.innerHTML?!0:!1},c=function(b){b&&/^BR|^IMG|^HR/.test(b.nodeName.toUpperCase())||t(b)||(b.innerHTML="")},q=function(b,y){for(;b;){if(y(b))return b;if(p(b))break;b=b.parentNode}return null},A=function(b,y){y=y||R.fail;var x=[];q(b,function(G){p(G)||
x.push(G);return y(G)});return x},w=function(b,y){y=y||R.fail;for(var x=[];b&&!y(b);)x.push(b),b=b.nextSibling;return x},E=function(b,y){var x=y.nextSibling,G=y.parentNode;x?G.insertBefore(b,x):G.appendChild(b);return b},F=function(b,y){u.each(y,function(x,G){b.appendChild(G)});return b},I=function(b){return 0===b.offset},N=function(b){return b.offset===t(b.node)},Q=function(b){return I(b)||N(b)},h=function(b){for(var y=0;b=b.previousSibling;)y+=1;return y},n=function(b){return!!(b&&b.childNodes&&
b.childNodes.length)},C=function(b,y){if(0===b.offset){if(p(b.node))return null;var x=b.node.parentNode;var G=h(b.node)}else n(b.node)?(x=b.node.childNodes[G-1],G=t(x)):(x=b.node,G=y?0:b.offset-1);return{node:x,offset:G}},z=function(b,y){if(t(b.node)===b.offset){if(p(b.node))return null;var x=b.node.parentNode;var G=h(b.node)+1}else n(b.node)?(x=b.node.childNodes[b.offset],G=0):(x=b.node,G=y?t(b.node):b.offset+1);return{node:x,offset:G}},B=function(b,y){return b.node===y.node&&b.offset===y.offset},
H=function(b){if(e(b.node))return I(b)?b.node:N(b)?b.node.nextSibling:b.node.splitText(b.offset);var y=b.node.childNodes[b.offset],x=E(b.node.cloneNode(!1),b.node);F(x,w(y));c(b.node);c(x);return x},K=d("TEXTAREA");return{NBSP_CHAR:aa,ZERO_WIDTH_NBSP_CHAR:"\ufeff",blank:"",emptyPara:"",isEditable:p,isControlSizing:function(b){return b&&u(b).hasClass("note-control-sizing")},buildLayoutInfo:function(b){if(b.hasClass("note-air-editor")){var y=M.last(b.attr("id").split("-"));var x=function(G){return function(){return u(G+
y)}};return{editor:function(){return b},editable:function(){return b},popover:x("#note-popover-"),handle:x("#note-handle-"),dialog:x("#note-dialog-")}}x=function(G){return function(){return b.find(G)}};return{editor:function(){return b},dropzone:x(".note-dropzone"),toolbar:x(".note-toolbar"),editable:x(".note-editable"),codable:x(".note-codable"),statusbar:x(".note-statusbar"),popover:x(".note-popover"),handle:x(".note-handle"),dialog:x(".note-dialog")}},isText:e,isPara:a,isInline:g,isBodyInline:function(b){return g(b)&&
!q(b,a)},isParaInline:function(b){return g(b)&&!!q(b,a)},isList:l,isTable:d("TABLE"),isCell:v,isBlockquote:f,isBodyContainer:m,isAnchor:k,isDiv:d("DIV"),isLi:d("LI"),isSpan:d("SPAN"),isB:d("B"),isU:d("U"),isS:d("S"),isI:d("I"),isImg:d("IMG"),isTextarea:K,isEmpty:D,isEmptyAnchor:R.and(k,D),nodeLength:t,isLeftEdgePoint:I,isRightEdgePoint:N,isEdgePoint:Q,isRightEdgeOf:function(b,y){for(;b&&b!==y;){if(h(b)!==t(b.parentNode)-1)return!1;b=b.parentNode}return!0},prevPoint:C,nextPoint:z,isSamePoint:B,isVisiblePoint:function(b){return e(b.node)||
!n(b.node)||D(b.node)||!Q(b)},prevPointUntil:function(b,y){for(;b;){if(y(b))return b;b=C(b)}return null},nextPointUntil:function(b,y){for(;b;){if(y(b))return b;b=z(b)}return null},walkPoint:function(b,y,x,G){for(var J=b;J;){x(J);if(B(J,y))break;J=z(J,G&&b.node!==J.node)}},ancestor:q,listAncestor:A,listNext:w,listPrev:function(b,y){y=y||R.fail;for(var x=[];b&&!y(b);)x.push(b),b=b.previousSibling;return x},listDescendant:function(b,y){var x=[];y=y||R.ok;(function O(J){b!==J&&y(J)&&x.push(J);for(var U=
0,ba=J.childNodes.length;U<ba;U++)O(J.childNodes[U])})(b);return x},commonAncestor:function(b,y){for(var x=A(b),G=y;G;G=G.parentNode)if(-1<u.inArray(G,x))return G;return null},wrap:function(b,y){var x=b.parentNode,G=u("<"+y+">")[0];x.insertBefore(G,b);G.appendChild(b);return G},insertAfter:E,appendChildNodes:F,position:h,hasChildren:n,makeOffsetPath:function(b,y){var x=M.initial(A(y,R.eq(b)));return u.map(x,h).reverse()},fromOffsetPath:function(b,y){for(var x=b,G=0,J=y.length;G<J;G++)x=x.childNodes[y[G]];
return x},splitTree:function(b,y){var x=A(y.node,R.eq(b));return x.length?1===x.length?H(y):x.reduce(function(G,J){var O=E(J.cloneNode(!1),J);G===y.node&&(G=H(y));F(O,w(G));c(J);c(O);return O}):null},createText:function(b){return document.createTextNode(b)},remove:function(b,y){if(b&&b.parentNode){if(b.removeNode)return b.removeNode(y);var x=b.parentNode;if(!y){var G=[],J;var O=0;for(J=b.childNodes.length;O<J;O++)G.push(b.childNodes[O]);O=0;for(J=G.length;O<J;O++)x.insertBefore(G[O],b)}x.removeChild(b)}},
html:function(b,y){var x=K(b[0])?b.val():b.html();y&&(x=x.replace(/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g,function(G,J,O){O=O.toUpperCase();J=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(O)&&!!J;O=/^TABLE|^TBODY|^TR|^HR|^UL/.test(O);return G+(J||O?"\n":"")}),x=u.trim(x));return x},value:function(b){return b.val().replace(/[\n\r]/g,"")}}}(),X=function(){return{readFileAsDataURL:function(p){return u.Deferred(function(d){u.extend(new FileReader,{onload:function(e){d.resolve(e.target.result)},onerror:function(){d.reject(this)}}).readAsDataURL(p)}).promise()},
createImage:function(p,d){return u.Deferred(function(e){u("<img>").one("load",function(){e.resolve(u(this))}).one("error abort",function(){e.reject(u(this))}).css({display:"none"}).appendTo(document.body).attr("src",p).attr("data-filename",d)}).promise()}}}(),V={isEdit:function(p){return-1!==[8,9,13,32].indexOf(p)},nameFromCode:{8:"BACKSPACE",9:"TAB",13:"ENTER",32:"SPACE",48:"NUM0",49:"NUM1",50:"NUM2",51:"NUM3",52:"NUM4",53:"NUM5",54:"NUM6",55:"NUM7",56:"NUM8",66:"B",69:"E",73:"I",74:"J",75:"K",76:"L",
82:"R",83:"S",85:"U",89:"Y",90:"Z",191:"SLASH",219:"LEFTBRACKET",220:"BACKSLASH",221:"RIGHTBRACKET"}},ca=function(){var p=function(d,e){if(1.9>L.jqueryVersion){var a={};u.each(e,function(g,l){a[l]=d.css(l)});return a}return d.css.call(d,e)};this.stylePara=function(d,e){u.each(d.nodes(r.isPara,{includeAncestor:!0}),function(a,g){u(g).css(e)})};this.current=function(d,e){var a=u(r.isText(d.sc)?d.sc.parentNode:d.sc);a=p(a,["font-family","font-size","text-align","list-style-type","line-height"])||{};
a["font-size"]=parseInt(a["font-size"],10);a["font-bold"]=document.queryCommandState("bold")?"bold":"normal";a["font-italic"]=document.queryCommandState("italic")?"italic":"normal";a["font-underline"]=document.queryCommandState("underline")?"underline":"normal";a["font-strikethrough"]=document.queryCommandState("strikeThrough")?"strikethrough":"normal";a["font-superscript"]=document.queryCommandState("superscript")?"superscript":"normal";a["font-subscript"]=document.queryCommandState("subscript")?
"subscript":"normal";if(d.isOnList()){var g=-1<u.inArray(a["list-style-type"],["circle","disc","disc-leading-zero","square"]);a["list-style"]=g?"unordered":"ordered"}else a["list-style"]="none";(g=r.ancestor(d.sc,r.isPara))&&g.style["line-height"]?a["line-height"]=g.style.lineHeight:(g=parseInt(a["line-height"],10)/parseInt(a["font-size"],10),a["line-height"]=g.toFixed(1));a.image=r.isImg(e)&&e;a.anchor=d.isOnAnchor()&&r.ancestor(d.sc,r.isAnchor);a.ancestors=r.listAncestor(d.sc,r.isEditable);a.range=
d;return a}},P=function(){var p=function(a,g){var l=a.parentElement(),v,f=document.body.createTextRange(),m=M.from(l.childNodes);for(v=0;v<m.length;v++)if(!r.isText(m[v])){f.moveToElementText(m[v]);if(0<=f.compareEndPoints("StartToStart",a))break;var k=m[v]}if(0!==v&&r.isText(m[v-1])){v=document.body.createTextRange();v.moveToElementText(k||l);v.collapse(!k);l=k?k.nextSibling:l.firstChild;k=a.duplicate();k.setEndPoint("StartToStart",v);for(k=k.text.replace(/[\r\n]/g,"").length;k>l.nodeValue.length&&
l.nextSibling;)k-=l.nodeValue.length,l=l.nextSibling;g&&l.nextSibling&&r.isText(l.nextSibling)&&k===l.nodeValue.length&&(k-=l.nodeValue.length,l=l.nextSibling);v=k}return{cont:l,offset:v}},d=function(a){var g=function(v,f){if(r.isText(v)){var m=r.listPrev(v,R.not(r.isText));var k=M.last(m).previousSibling;var t=k||v.parentNode;f+=M.sum(M.tail(m),r.nodeLength);m=!k}else{t=v.childNodes[f]||v;if(r.isText(t))return g(t,0);f=0;m=!1}return{node:t,collapseToStart:m,offset:f}},l=document.body.createTextRange();
a=g(a.node,a.offset);l.moveToElementText(a.node);l.collapse(a.collapseToStart);l.moveStart("character",a.offset);return l},e=function(a,g,l,v){this.sc=a;this.so=g;this.ec=l;this.eo=v;var f=function(){if(L.isW3CRangeSupport){var k=document.createRange();k.setStart(a,g);k.setEnd(l,v);return k}k=d({node:a,offset:g});k.setEndPoint("EndToEnd",d({node:l,offset:v}));return k};this.getPoints=function(){return{sc:a,so:g,ec:l,eo:v}};this.getStartPoint=function(){return{node:a,offset:g}};this.getEndPoint=function(){return{node:l,
offset:v}};this.select=function(){var k=f();if(L.isW3CRangeSupport){var t=document.getSelection();0<t.rangeCount&&t.removeAllRanges();t.addRange(k)}else k.select()};this.normalize=function(){var k=function(D){r.isVisiblePoint(D)||(r.isLeftEdgePoint(D)?D=r.nextPointUntil(D,r.isVisiblePoint):r.isRightEdgePoint(D)&&(D=r.prevPointUntil(D,r.isVisiblePoint)));return D},t=k(this.getStartPoint());k=k(this.getStartPoint());return new e(t.node,t.offset,k.node,k.offset)};this.nodes=function(k,t){k=k||R.ok;var D=
t&&t.includeAncestor,c=t&&t.fullyContains,q=this.getStartPoint(),A=this.getEndPoint(),w=[],E=[];r.walkPoint(q,A,function(F){if(!r.isEditable(F.node)){if(c){if(r.isLeftEdgePoint(F)&&E.push(F.node),r.isRightEdgePoint(F)&&M.contains(E,F.node))var I=F.node}else I=D?r.ancestor(F.node,k):F.node;I&&k(I)&&w.push(I)}},!0);return M.unique(w)};this.commonAncestor=function(){return r.commonAncestor(a,l)};this.expand=function(k){var t=r.ancestor(a,k);k=r.ancestor(l,k);if(!t&&!k)return new e(a,g,l,v);var D=this.getPoints();
t&&(D.sc=t,D.so=0);k&&(D.ec=k,D.eo=r.nodeLength(k));return new e(D.sc,D.so,D.ec,D.eo)};this.collapse=function(k){return k?new e(a,g,a,g):new e(l,v,l,v)};this.splitText=function(){var k=a===l,t=this.getPoints();r.isText(l)&&!r.isEdgePoint(this.getEndPoint())&&l.splitText(v);r.isText(a)&&!r.isEdgePoint(this.getStartPoint())&&(t.sc=a.splitText(g),t.so=0,k&&(t.ec=t.sc,t.eo=v-g));return new e(t.sc,t.so,t.ec,t.eo)};this.deleteContents=function(){if(this.isCollapsed())return this;var k=this.splitText(),
t=k.nodes(null,{fullyContains:!0}),D=r.prevPointUntil(k.getStartPoint(),function(q){return!M.contains(t,q.node)}),c=[];u.each(t,function(q,A){var w=A.parentNode;D.node!==w&&1===r.nodeLength(w)&&c.push(w);r.remove(A,!1)});u.each(c,function(q,A){r.remove(A,!1)});return new e(D.node,D.offset,D.node,D.offset)};var m=function(k){return function(){var t=r.ancestor(a,k);return!!t&&t===r.ancestor(l,k)}};this.isOnEditable=m(r.isEditable);this.isOnList=m(r.isList);this.isOnAnchor=m(r.isAnchor);this.isOnCell=
m(r.isCell);this.isCollapsed=function(){return a===l&&g===v};this.wrapBodyInlineWithPara=function(){if(r.isEditable(a)&&!a.childNodes[g])return new e(a.appendChild(u(r.emptyPara)[0]),0);if(!r.isInline(a)||r.isParaInline(a))return this;var k=r.listAncestor(a,R.not(r.isInline)),t=M.last(k);r.isInline(t)||(t=k[k.length-2]||a.childNodes[g]);k=r.listPrev(t,r.isParaInline).reverse();k=k.concat(r.listNext(t.nextSibling,r.isParaInline));k.length&&(t=r.wrap(M.head(k),"p"),r.appendChildNodes(t,M.tail(k)));
return this};this.insertNode=function(k,t){var D=this.wrapBodyInlineWithPara().getStartPoint();if(t){var c=r.isPara(D.node)?D.node:D.node.parentNode;D=r.isPara(D.node)?D.node.childNodes[D.offset]:r.splitTree(D.node,D)}else{var q=r.listAncestor(D.node,r.isBodyContainer);c=M.last(q)||D.node;r.isBodyContainer(c)?q=q[q.length-2]:(q=c,c=q.parentNode);D=q&&r.splitTree(q,D)}D?D.parentNode.insertBefore(k,D):c.appendChild(k);return k};this.toString=function(){var k=f();return L.isW3CRangeSupport?k.toString():
k.text};this.bookmark=function(k){return{s:{path:r.makeOffsetPath(k,a),offset:g},e:{path:r.makeOffsetPath(k,l),offset:v}}};this.getClientRects=function(){return f().getClientRects()}};return{create:function(a,g,l,v){if(arguments.length)2===arguments.length&&(l=a,v=g);else if(L.isW3CRangeSupport){var f=document.getSelection();if(0===f.rangeCount)return null;f=f.getRangeAt(0);a=f.startContainer;g=f.startOffset;l=f.endContainer;v=f.endOffset}else{var m=document.selection.createRange();f=m.duplicate();
f.collapse(!1);m.collapse(!0);m=p(m,!0);f=p(f,!1);a=m.cont;g=m.offset;l=f.cont;v=f.offset}return new e(a,g,l,v)},createFromNode:function(a){return this.create(a,0,a,1)},createFromBookmark:function(a,g){var l=r.fromOffsetPath(a,g.s.path),v=g.s.offset,f=r.fromOffsetPath(a,g.e.path);return new e(l,v,f,g.e.offset)}}}(),da=function(){this.tab=function(p,d){var e=r.ancestor(p.commonAncestor(),r.isCell),a=r.ancestor(e,r.isTable);a=r.listDescendant(a,r.isCell);(e=M[d?"prev":"next"](a,e))&&P.create(e,0).select()};
this.createTable=function(p,d){for(var e=[],a=0;a<p;a++)e.push("<td>"+r.blank+"</td>");e=e.join("");a=[];for(var g=0;g<d;g++)a.push("<tr>"+e+"</tr>");e=a.join("");return u('<table class="table table-bordered">'+e+"</table>")[0]}},ea=function(){var p=new ca,d=new da;this.saveRange=function(f){f.focus();f.data("range",P.create())};this.restoreRange=function(f){var m=f.data("range");m&&(m.select(),f.focus())};this.currentStyle=function(f){var m=P.create();return m?m.isOnEditable()&&p.current(m,f):!1};
var e=this.triggerOnChange=function(f){var m=f.data("callbacks").onChange;m&&m(f.html(),f)};this.undo=function(f){f.data("NoteHistory").undo(f);e(f)};this.redo=function(f){f.data("NoteHistory").redo(f);e(f)};for(var a=this.recordUndo=function(f){f.data("NoteHistory").recordUndo(f)},g="bold italic underline strikethrough superscript subscript justifyLeft justifyCenter justifyRight justifyFull insertOrderedList insertUnorderedList indent outdent formatBlock removeFormat backColor foreColor insertHorizontalRule fontName".split(" "),
l=0,v=g.length;l<v;l++)this[g[l]]=function(f){return function(m,k){a(m);document.execCommand(f,!1,k)}}(g[l]);this.tab=function(f,m){var k=P.create();if(k.isCollapsed()&&k.isOnCell())d.tab(k);else{var t=m.tabsize;a(f);var D=r.createText(Array(t+1).join(r.NBSP_CHAR));k=k.deleteContents();k.insertNode(D,!0);k=P.create(D,t);k.select()}};this.untab=function(){var f=P.create();f.isCollapsed()&&f.isOnCell()&&d.tab(f,!0)};this.insertParagraph=function(f){a(f);var m=P.create();m=m.deleteContents();m=m.wrapBodyInlineWithPara();
var k=r.ancestor(m.sc,r.isPara);m=r.splitTree(k,m.getStartPoint());k=r.listDescendant(k,r.isEmptyAnchor);k=k.concat(r.listDescendant(m,r.isEmptyAnchor));u.each(k,function(t,D){r.remove(D)});P.create(m,0).normalize().select();e(f)};this.insertImage=function(f,m,k){X.createImage(m,k).then(function(t){a(f);t.css({display:"",width:Math.min(f.width(),t.width())});P.create().insertNode(t[0]);e(f)}).fail(function(){var t=f.data("callbacks");if(t.onImageUploadError)t.onImageUploadError()})};this.insertVideo=
function(f,m){a(f);var k=m.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&\?]*).*/),t=m.match(/\/\/instagram.com\/p\/(.[a-zA-Z0-9]*)/),D=m.match(/\/\/vine.co\/v\/(.[a-zA-Z0-9]*)/),c=m.match(/\/\/(player.)?vimeo.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/),q=m.match(/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/),A=m.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)\.html/);if(k&&11===k[2].length){k=k[2];var w=u("<iframe>").attr("src","//www.youtube.com/embed/"+k).attr("width","640").attr("height",
"360")}else t&&t[0].length?w=u("<iframe>").attr("src",t[0]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true"):D&&D[0].length?w=u("<iframe>").attr("src",D[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed"):c&&c[3].length?w=u("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("src","//player.vimeo.com/video/"+c[3]).attr("width","640").attr("height","360"):q&&q[2].length?w=u("<iframe>").attr("src",
"//www.dailymotion.com/embed/video/"+q[2]).attr("width","640").attr("height","360"):A&&A[1].length&&(w=u("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+A[1]));w&&(w.attr("frameborder",0),P.create().insertNode(w[0]),e(f))};this.formatBlock=function(f,m){a(f);m=L.isMSIE?"<"+m+">":m;document.execCommand("FormatBlock",!1,m)};this.formatPara=function(f){this.formatBlock(f,"P")};for(l=1;6>=l;l++)this["formatH"+
l]=function(f){return function(m){this.formatBlock(m,"H"+f)}}(l);this.fontSize=function(f,m){a(f);document.execCommand("fontSize",!1,3);L.isFF?f.find("font[size=3]").removeAttr("size").css("font-size",m+"px"):f.find("span").filter(function(){return"medium"===this.style.fontSize}).css("font-size",m+"px")};this.lineHeight=function(f,m){a(f);p.stylePara(P.create(),{lineHeight:m});e(f)};this.unlink=function(f){var m=P.create();m.isOnAnchor()&&(a(f),f=r.ancestor(m.sc,r.isAnchor),m=P.createFromNode(f),
m.select(),document.execCommand("unlink"))};this.createLink=function(f,m,k){var t=m.url,D=m.text,c=m.newWindow;m=m.range;a(f);k.onCreateLink&&(t=k.onCreateLink(t));m=m.deleteContents();k=m.insertNode(u("<A>"+D+"</A>")[0],!0);u(k).attr({href:t,target:c?"_blank":""});P.createFromNode(k).select();e(f)};this.getLinkInfo=function(f){f.focus();f=P.create().expand(r.isAnchor);var m=u(M.head(f.nodes(r.isAnchor)));return{range:f,text:f.toString(),isNewWindow:m.length?"_blank"===m.attr("target"):!0,url:m.length?
m.attr("href"):""}};this.getVideoInfo=function(f){f.focus();f=P.create();f.isOnAnchor()&&(f=r.ancestor(f.sc,r.isAnchor),f=P.createFromNode(f));return{text:f.toString()}};this.color=function(f,m){var k=JSON.parse(m),t=k.foreColor;k=k.backColor;a(f);t&&document.execCommand("foreColor",!1,t);k&&document.execCommand("backColor",!1,k)};this.insertTable=function(f,m){a(f);var k=m.split("x"),t=P.create();t=t.deleteContents();t.insertNode(d.createTable(k[0],k[1]));e(f)};this.floatMe=function(f,m,k){a(f);
k.css("float",m)};this.resize=function(f,m,k){a(f);k.css({width:f.width()*m+"px",height:""})};this.resizeTo=function(f,m,k){if(k){k=f.y/f.x;var t=m.data("ratio");f={width:t>k?f.x:f.y/t,height:t>k?f.x*t:f.y}}else f={width:f.x,height:f.y};m.css(f)};this.removeMedia=function(f,m,k){a(f);k.detach()}},fa=function(){var p=[],d=[],e=function(a){var g=a[0],l=P.create();return{contents:a.html(),bookmark:l.bookmark(g)}};this.undo=function(a){var g=e(a);if(p.length){var l=p.pop();a.html(l.contents);d.push(g)}};
this.redo=function(a){var g=e(a);if(d.length){var l=d.pop();a.html(l.contents);p.push(g)}};this.recordUndo=function(a){d=[];p.push(e(a))}},Y=function(){this.update=function(p,d){var e=function(v,f){v.find(".dropdown-menu li a").each(function(){this.className=u(this).data("value")+""===f+""?"checked":""})},a=function(v,f){p.find(v).toggleClass("active",f())},g=p.find(".note-fontname");if(g.length){var l=d["font-family"];l&&(l=M.head(l.split(",")),l=l.replace(/'/g,""),g.find(".note-current-fontname").text(l),
e(g,l))}g=p.find(".note-fontsize");g.find(".note-current-fontsize").text(d["font-size"]);e(g,parseFloat(d["font-size"]));g=p.find(".note-height");e(g,parseFloat(d["line-height"]));a('button[data-event="bold"]',function(){return"bold"===d["font-bold"]});a('button[data-event="italic"]',function(){return"italic"===d["font-italic"]});a('button[data-event="underline"]',function(){return"underline"===d["font-underline"]});a('button[data-event="strikethrough"]',function(){return"strikethrough"===d["font-strikethrough"]});
a('button[data-event="superscript"]',function(){return"superscript"===d["font-superscript"]});a('button[data-event="subscript"]',function(){return"subscript"===d["font-subscript"]});a('button[data-event="justifyLeft"]',function(){return"left"===d["text-align"]||"start"===d["text-align"]});a('button[data-event="justifyCenter"]',function(){return"center"===d["text-align"]});a('button[data-event="justifyRight"]',function(){return"right"===d["text-align"]});a('button[data-event="justifyFull"]',function(){return"justify"===
d["text-align"]});a('button[data-event="insertUnorderedList"]',function(){return"unordered"===d["list-style"]});a('button[data-event="insertOrderedList"]',function(){return"ordered"===d["list-style"]})};this.updateRecentColor=function(p,d,e){p=u(p).closest(".note-color").find(".note-recent-color");var a=JSON.parse(p.attr("data-value"));a[d]=e;p.attr("data-value",JSON.stringify(a));d="backColor"===d?"background-color":"color";p.find("i").css(d,e)}},ha=function(){var p=new Y;this.update=function(d,
e){p.update(d,e)};this.updateRecentColor=function(d,e,a){p.updateRecentColor(d,e,a)};this.activate=function(d){d.find("button").not('button[data-event="codeview"]').removeClass("disabled")};this.deactivate=function(d){d.find("button").not('button[data-event="codeview"]').addClass("disabled")};this.updateFullscreen=function(d,e){d.find('button[data-event="fullscreen"]').toggleClass("active",e)};this.updateCodeview=function(d,e){d.find('button[data-event="codeview"]').toggleClass("active",e)}},ia=function(){var p=
new Y,d=function(a,g){var l=u(a),v=g?l.offset():l.position();l=l.outerHeight(!0);return{left:v.left,top:v.top+l}},e=function(a,g){a.css({display:"block",left:g.left,top:g.top})};this.update=function(a,g,l){p.update(a,g);var v=a.find(".note-link-popover");if(g.anchor){var f=v.find("a"),m=u(g.anchor).attr("href");f.attr("href",m).html(m);e(v,d(g.anchor,l))}else v.hide();v=a.find(".note-image-popover");g.image?e(v,d(g.image,l)):v.hide();a=a.find(".note-air-popover");l&&!g.range.isCollapsed()?(g=R.rect2bnd(M.last(g.range.getClientRects())),
e(a,{left:Math.max(g.left+g.width/2-20,0),top:g.top+g.height})):a.hide()};this.updateRecentColor=function(a,g,l){a.updateRecentColor(a,g,l)};this.hide=function(a){a.children().hide()}},ja=function(){this.update=function(p,d,e){p=p.find(".note-control-selection");if(d.image){var a=u(d.image);e=e?a.offset():a.position();var g=a.outerWidth(!0);a=a.outerHeight(!0);p.css({display:"block",left:e.left,top:e.top,width:g,height:a}).data("target",d.image);d=g+"x"+a;p.find(".note-control-selection-info").text(d)}else p.hide()};
this.hide=function(p){p.children().hide()}},ka=function(){var p=function(d,e){d.toggleClass("disabled",!e);d.attr("disabled",!e)};this.showImageDialog=function(d,e){return u.Deferred(function(a){var g=e.find(".note-image-dialog"),l=e.find(".note-image-input"),v=e.find(".note-image-url"),f=e.find(".note-image-btn");g.one("shown.bs.modal",function(){l.replaceWith(l.clone().on("change",function(){a.resolve(this.files);g.modal("hide")}).val(""));f.click(function(m){m.preventDefault();a.resolve(v.val());
g.modal("hide")});v.on("keyup paste",function(m){m="paste"===m.type?m.originalEvent.clipboardData.getData("text"):v.val();p(f,m)}).val("").trigger("focus")}).one("hidden.bs.modal",function(){l.off("change");v.off("keyup paste");f.off("click");"pending"===a.state()&&a.reject()}).modal("show")})};this.showVideoDialog=function(d,e,a){return u.Deferred(function(g){var l=e.find(".note-video-dialog"),v=l.find(".note-video-url"),f=l.find(".note-video-btn");l.one("shown.bs.modal",function(){v.val(a.text).keyup(function(){p(f,
v.val())}).trigger("keyup").trigger("focus");f.click(function(m){m.preventDefault();g.resolve(v.val());l.modal("hide")})}).one("hidden.bs.modal",function(){v.off("keyup");f.off("click");"pending"===g.state()&&g.reject()}).modal("show")})};this.showLinkDialog=function(d,e,a){return u.Deferred(function(g){var l=e.find(".note-link-dialog"),v=l.find(".note-link-text"),f=l.find(".note-link-url"),m=l.find(".note-link-btn"),k=l.find("input[type=checkbox]");l.one("shown.bs.modal",function(){v.val(a.text);
v.keyup(function(){a.text=v.val()});a.url||(a.url=a.text,p(m,a.text));f.keyup(function(){p(m,f.val());a.text||v.val(f.val())}).val(a.url).trigger("focus").trigger("select");k.prop("checked",a.newWindow);m.one("click",function(t){t.preventDefault();g.resolve({range:a.range,url:f.val(),text:v.val(),newWindow:k.is(":checked")});l.modal("hide")})}).one("hidden.bs.modal",function(){v.off("keyup");f.off("keyup");m.off("click");"pending"===g.state()&&g.reject()}).modal("show")}).promise()};this.showHelpDialog=
function(d,e){return u.Deferred(function(a){e.find(".note-help-dialog").one("hidden.bs.modal",function(){a.resolve()}).modal("show")}).promise()}},T;L.hasCodeMirror&&(L.isSupportAmd?require(["CodeMirror"],function(p){T=p}):T=window.CodeMirror);u.summernote=u.summernote||{};u.extend(u.summernote,{version:"0.5.8",options:{width:null,height:null,minHeight:null,maxHeight:null,focus:!1,tabsize:4,styleWithSpan:!0,disableLinkTarget:!1,disableDragAndDrop:!1,disableResizeEditor:!1,codemirror:{mode:"text/html",
htmlMode:!0,lineNumbers:!0},lang:"en-US",direction:null,toolbar:[["style",["style"]],["font","bold italic underline superscript subscript strikethrough clear".split(" ")],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","video","hr"]],["view",["fullscreen","codeview"]],["help",["help"]]],airMode:!1,airPopover:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",
["table"]],["insert",["link","picture"]]],styleTags:"p blockquote pre h1 h2 h3 h4 h5 h6".split(" "),defaultFontName:"Helvetica Neue",fontNames:"Arial;Arial Black;Comic Sans MS;Courier New;Helvetica Neue;Impact;Lucida Grande;Tahoma;Times New Roman;Verdana".split(";"),colors:["#000000 #424242 #636363 #9C9C94 #CEC6CE #EFEFEF #F7F7F7 #FFFFFF".split(" "),"#FF0000 #FF9C00 #FFFF00 #00FF00 #00FFFF #0000FF #9C00FF #FF00FF".split(" "),"#F7C6CE #FFE7CE #FFEFC6 #D6EFD6 #CEDEE7 #CEE7F7 #D6D6E7 #E7D6DE".split(" "),
"#E79C9C #FFC69C #FFE79C #B5D6A5 #A5C6CE #9CC6EF #B5A5D6 #D6A5BD".split(" "),"#E76363 #F7AD6B #FFD663 #94BD7B #73A5AD #6BADDE #8C7BC6 #C67BA5".split(" "),"#CE0000 #E79439 #EFC631 #6BA54A #4A7B8C #3984C6 #634AA5 #A54A7B".split(" "),"#9C0000 #B56308 #BD9400 #397B21 #104A5A #085294 #311873 #731842".split(" "),"#630000 #7B3900 #846300 #295218 #083139 #003163 #21104A #4A1031".split(" ")],fontSizes:"8 9 10 11 12 14 18 24 36".split(" "),lineHeights:"1.0 1.2 1.4 1.5 1.6 1.8 2.0 3.0".split(" "),insertTableMaxSize:{col:10,
row:10},oninit:null,onfocus:null,onblur:null,onenter:null,onkeyup:null,onkeydown:null,onImageUpload:null,onImageUploadError:null,onToolbarClick:null,onCreateLink:function(p){-1!==p.indexOf("@")&&-1===p.indexOf(":")?p="mailto:"+p:-1===p.indexOf("://")&&(p="http://"+p);return p},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft",
"CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"showLinkDialog"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",
TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4",
"CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"showLinkDialog"}}},lang:{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",clear:"Remove Font Style",height:"Line Height",name:"Font Family",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",
floatNone:"Float None",dragImageHere:"Drag an image here",selectFromFiles:"Select from files",url:"Image URL",remove:"Remove Image"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},
style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",
foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style"},history:{undo:"Undo",redo:"Redo"}}}});var S=new function(){var p=function(c,q){var A=q.event,w=q.value,E=q.title,F=q.className,I=q.dropdown;return'<button type="button" class="btn btn-default btn-sm btn-small'+
(F?" "+F:"")+(I?" dropdown-toggle":"")+'"'+(I?' data-toggle="dropdown"':"")+(E?' title="'+E+'"':"")+(A?' data-event="'+A+'"':"")+(w?" data-value='"+w+"'":"")+' tabindex="-1">'+c+(I?' <span class="caret"></span>':"")+"</button>"+(I||"")},d=function(c,q){return p('<i class="'+c+'"></i>',q)},e=function(c,q){return'<div class="'+c+' popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content">'+q+"</div></div>"},a=function(c,q,A,w){return'<div class="'+c+' modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content">'+
(q?'<div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4 class="modal-title">'+q+"</h4></div>":"")+'<form class="note-modal-form"><div class="modal-body"><div class="row-fluid">'+A+"</div></div>"+(w?'<div class="modal-footer">'+w+"</div>":"")+"</form></div></div></div>"},g={picture:function(c){return d("fa fa-picture-o icon-picture",{event:"showImageDialog",title:c.image.image})},link:function(c){return d("fa fa-link icon-link",{event:"showLinkDialog",
title:c.link.link})},video:function(c){return d("fa fa-youtube-play icon-play",{event:"showVideoDialog",title:c.video.video})},table:function(c){return d("fa fa-table icon-table",{title:c.table.table,dropdown:'<ul class="dropdown-menu"><div class="note-dimension-picker"><div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div><div class="note-dimension-picker-highlighted"></div><div class="note-dimension-picker-unhighlighted"></div></div><div class="note-dimension-display"> 1 x 1 </div></ul>'})},
style:function(c,q){var A=q.styleTags.reduce(function(w,E){var F=c.style["p"===E?"normal":E];return w+'<li><a data-event="formatBlock" href="#" data-value="'+E+'">'+("p"===E||"pre"===E?F:"<"+E+">"+F+"</"+E+">")+"</a></li>"},"");return d("fa fa-magic icon-magic",{title:c.style.style,dropdown:'<ul class="dropdown-menu">'+A+"</ul>"})},fontname:function(c,q){var A=q.fontNames.reduce(function(w,E){return L.isFontInstalled(E)?w+'<li><a data-event="fontName" href="#" data-value="'+E+'"><i class="fa fa-check icon-ok"></i> '+
E+"</a></li>":w},"");return p('<span class="note-current-fontname">'+q.defaultFontName+"</span>",{title:c.font.name,dropdown:'<ul class="dropdown-menu">'+A+"</ul>"})},fontsize:function(c,q){var A=q.fontSizes.reduce(function(w,E){return w+'<li><a data-event="fontSize" href="#" data-value="'+E+'"><i class="fa fa-check icon-ok"></i> '+E+"</a></li>"},"");return p('<span class="note-current-fontsize">11</span>',{title:c.font.size,dropdown:'<ul class="dropdown-menu">'+A+"</ul>"})},color:function(c){var q=
p('<i class="fa fa-font icon-font" style="color:black;background-color:yellow;"></i>',{className:"note-recent-color",title:c.color.recent,event:"color",value:'{"backColor":"yellow"}'});c=p("",{title:c.color.more,dropdown:'<ul class="dropdown-menu"><li><div class="btn-group"><div class="note-palette-title">'+c.color.background+'</div><div class="note-color-reset" data-event="backColor" data-value="inherit" title="'+c.color.transparent+'">'+c.color.setTransparent+'</div><div class="note-color-palette" data-target-event="backColor"></div></div><div class="btn-group"><div class="note-palette-title">'+
c.color.foreground+'</div><div class="note-color-reset" data-event="foreColor" data-value="inherit" title="'+c.color.reset+'">'+c.color.resetToDefault+'</div><div class="note-color-palette" data-target-event="foreColor"></div></div></li></ul>'});return q+c},bold:function(c){return d("fa fa-bold icon-bold",{event:"bold",title:c.font.bold})},italic:function(c){return d("fa fa-italic icon-italic",{event:"italic",title:c.font.italic})},underline:function(c){return d("fa fa-underline icon-underline",{event:"underline",
title:c.font.underline})},strikethrough:function(c){return d("fa fa-strikethrough icon-strikethrough",{event:"strikethrough",title:c.font.strikethrough})},superscript:function(c){return d("fa fa-superscript icon-superscript",{event:"superscript",title:c.font.superscript})},subscript:function(c){return d("fa fa-subscript icon-subscript",{event:"subscript",title:c.font.subscript})},clear:function(c){return d("fa fa-eraser icon-eraser",{event:"removeFormat",title:c.font.clear})},ul:function(c){return d("fa fa-list-ul icon-list-ul",
{event:"insertUnorderedList",title:c.lists.unordered})},ol:function(c){return d("fa fa-list-ol icon-list-ol",{event:"insertOrderedList",title:c.lists.ordered})},paragraph:function(c){var q=d("fa fa-align-left icon-align-left",{title:c.paragraph.left,event:"justifyLeft"}),A=d("fa fa-align-center icon-align-center",{title:c.paragraph.center,event:"justifyCenter"}),w=d("fa fa-align-right icon-align-right",{title:c.paragraph.right,event:"justifyRight"}),E=d("fa fa-align-justify icon-align-justify",{title:c.paragraph.justify,
event:"justifyFull"}),F=d("fa fa-outdent icon-indent-left",{title:c.paragraph.outdent,event:"outdent"}),I=d("fa fa-indent icon-indent-right",{title:c.paragraph.indent,event:"indent"});return d("fa fa-align-left icon-align-left",{title:c.paragraph.paragraph,dropdown:'<div class="dropdown-menu"><div class="note-align btn-group">'+q+A+w+E+'</div><div class="note-list btn-group">'+I+F+"</div></div>"})},height:function(c,q){var A=q.lineHeights.reduce(function(w,E){return w+'<li><a data-event="lineHeight" href="#" data-value="'+
parseFloat(E)+'"><i class="fa fa-check icon-ok"></i> '+E+"</a></li>"},"");return d("fa fa-text-height icon-text-height",{title:c.font.height,dropdown:'<ul class="dropdown-menu">'+A+"</ul>"})},help:function(c){return d("fa fa-question icon-question",{event:"showHelpDialog",title:c.options.help})},fullscreen:function(c){return d("fa fa-arrows-alt icon-fullscreen",{event:"fullscreen",title:c.options.fullscreen})},codeview:function(c){return d("fa fa-code icon-code",{event:"codeview",title:c.options.codeview})},
undo:function(c){return d("fa fa-undo icon-undo",{event:"undo",title:c.history.undo})},redo:function(c){return d("fa fa-repeat icon-repeat",{event:"redo",title:c.history.redo})},hr:function(c){return d("fa fa-minus icon-hr",{event:"insertHorizontalRule",title:c.hr.insert})}},l=function(c,q){var A=function(){for(var w="",E=0,F=q.airPopover.length;E<F;E++){var I=q.airPopover[E];w+='<div class="note-'+I[0]+' btn-group">';for(var N=0,Q=I[1].length;N<Q;N++)w+=g[I[1][N]](c,q);w+="</div>"}return e("note-air-popover",
w)};return'<div class="note-popover">'+function(){var w=d("fa fa-edit icon-edit",{title:c.link.edit,event:"showLinkDialog"}),E=d("fa fa-unlink icon-unlink",{title:c.link.unlink,event:"unlink"});return e("note-link-popover",'<a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert btn-group">'+w+E+"</div>")}()+function(){var w=p('<span class="note-fontsize-10">100%</span>',{title:c.image.resizeFull,event:"resize",value:"1"}),E=p('<span class="note-fontsize-10">50%</span>',
{title:c.image.resizeHalf,event:"resize",value:"0.5"}),F=p('<span class="note-fontsize-10">25%</span>',{title:c.image.resizeQuarter,event:"resize",value:"0.25"}),I=d("fa fa-align-left icon-align-left",{title:c.image.floatLeft,event:"floatMe",value:"left"}),N=d("fa fa-align-right icon-align-right",{title:c.image.floatRight,event:"floatMe",value:"right"}),Q=d("fa fa-align-justify icon-align-justify",{title:c.image.floatNone,event:"floatMe",value:"none"}),h=d("fa fa-trash-o icon-trash",{title:c.image.remove,
event:"removeMedia",value:"none"});return e("note-image-popover",'<div class="btn-group">'+w+E+F+'</div><div class="btn-group">'+I+N+Q+'</div><div class="btn-group">'+h+"</div>")}()+(q.airMode?A():"")+"</div>"},v=function(){return'<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="note-control-sizing note-control-se"></div><div class="note-control-selection-info"></div></div></div>'},
f=function(c,q){return'<table class="note-shortcut"><thead><tr><th></th><th>'+c+"</th></tr></thead><tbody>"+q+"</tbody></table>"},m=function(c,q){var A='<table class="note-shortcut-layout"><tbody><tr><td>'+f(c.shortcut.action,"<tr><td>\u2318 + Z</td><td>"+c.history.undo+"</td></tr><tr><td>\u2318 + \u21e7 + Z</td><td>"+c.history.redo+"</td></tr><tr><td>\u2318 + ]</td><td>"+c.paragraph.indent+"</td></tr><tr><td>\u2318 + [</td><td>"+c.paragraph.outdent+"</td></tr><tr><td>\u2318 + ENTER</td><td>"+c.hr.insert+
"</td></tr>")+"</td><td>";var w=f(c.shortcut.textFormatting,"<tr><td>\u2318 + B</td><td>"+c.font.bold+"</td></tr><tr><td>\u2318 + I</td><td>"+c.font.italic+"</td></tr><tr><td>\u2318 + U</td><td>"+c.font.underline+"</td></tr><tr><td>\u2318 + \u21e7 + S</td><td>"+c.font.strikethrough+"</td></tr><tr><td>\u2318 + \\</td><td>"+c.font.clear+"</td></tr>");A=A+w+"</td></tr><tr><td>";w=f(c.shortcut.documentStyle,"<tr><td>\u2318 + NUM0</td><td>"+c.style.normal+"</td></tr><tr><td>\u2318 + NUM1</td><td>"+c.style.h1+
"</td></tr><tr><td>\u2318 + NUM2</td><td>"+c.style.h2+"</td></tr><tr><td>\u2318 + NUM3</td><td>"+c.style.h3+"</td></tr><tr><td>\u2318 + NUM4</td><td>"+c.style.h4+"</td></tr><tr><td>\u2318 + NUM5</td><td>"+c.style.h5+"</td></tr><tr><td>\u2318 + NUM6</td><td>"+c.style.h6+"</td></tr>");A=A+w+"</td><td>";w=f(c.shortcut.paragraphFormatting,"<tr><td>\u2318 + \u21e7 + L</td><td>"+c.paragraph.left+"</td></tr><tr><td>\u2318 + \u21e7 + E</td><td>"+c.paragraph.center+"</td></tr><tr><td>\u2318 + \u21e7 + R</td><td>"+
c.paragraph.right+"</td></tr><tr><td>\u2318 + \u21e7 + J</td><td>"+c.paragraph.justify+"</td></tr><tr><td>\u2318 + \u21e7 + NUM7</td><td>"+c.lists.ordered+"</td></tr><tr><td>\u2318 + \u21e7 + NUM8</td><td>"+c.lists.unordered+"</td></tr>");A=A+w+"</td></tr>";if(q.extraKeys){w=q.extraKeys;var E="";for(F in w)w.hasOwnProperty(F)&&(E+="<tr><td>"+F+"</td><td>"+w[F]+"</td></tr>");var F=f(c.shortcut.extraKeys,E);A+='<tr><td colspan="2">'+F+"</td></tr>"}return A+"</tbody</table>"},k=function(c,q){var A='<div class="note-dialog">'+
a("note-image-dialog",c.image.insert,'<div class="note-group-select-from-files"><h5>'+c.image.selectFromFiles+'</h5><input class="note-image-input" type="file" name="files" accept="image/*" /></div><h5>'+c.image.url+'</h5><input class="note-image-url form-control span12" type="text" />','<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+c.image.insert+"</button>")+a("note-link-dialog",c.link.insert,'<div class="form-group"><label>'+c.link.textToDisplay+'</label><input class="note-link-text form-control span12" type="text" /></div><div class="form-group"><label>'+
c.link.url+'</label><input class="note-link-url form-control span12" type="text" /></div>'+(q.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+c.link.openInNewWindow+"</label></div>"),'<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+c.link.insert+"</button>")+a("note-video-dialog",c.video.insert,'<div class="form-group"><label>'+c.video.url+'</label>&nbsp;<small class="text-muted">'+c.video.providers+'</small><input class="note-video-url form-control span12" type="text" /></div>',
'<button href="#" class="btn btn-primary note-video-btn disabled" disabled>'+c.video.insert+"</button>");var w='<a class="modal-close pull-right" aria-hidden="true" tabindex="-1">'+c.shortcut.close+'</a><div class="title">'+c.shortcut.shortcuts+"</div>"+(L.isMac?m(c,q):m(c,q).replace(/\u2318/g,"Ctrl").replace(/\u21e7/g,"Shift"))+'<p class="text-center"><a href="//hackerwins.github.io/summernote/" target="_blank">Summernote 0.5.8</a> \u00b7 <a href="//github.com/HackerWins/summernote" target="_blank">Project</a> \u00b7 <a href="//github.com/HackerWins/summernote/issues" target="_blank">Issues</a></p>';
w=a("note-help-dialog","",w,"");return A+w+"</div>"},t=function(c,q,A){var w=R.invertObject(q);c.find("button").each(function(E,F){var I=u(F),N=w[I.data("event")];N&&I.attr("title",function(Q,h){var n=N;L.isMac&&(n=n.replace("CMD","\u2318").replace("SHIFT","\u21e7"));n=n.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]");return h+" ("+n+")"})}).tooltip({container:"body",trigger:"hover",placement:A||"top"}).on("click",function(){u(this).tooltip("hide")})},
D=function(c,q){var A=q.colors;c.find(".note-color-palette").each(function(){for(var w=u(this),E=w.attr("data-target-event"),F=[],I=0,N=A.length;I<N;I++){for(var Q=A[I],h=[],n=0,C=Q.length;n<C;n++){var z=Q[n];h.push(['<button type="button" class="note-color-btn" style="background-color:',z,';" data-event="',E,'" data-value="',z,'" title="',z,'" data-toggle="button" tabindex="-1"></button>'].join(""))}F.push('<div class="note-color-row">'+h.join("")+"</div>")}w.html(F.join(""))})};this.createLayoutByAirMode=
function(c,q){var A=q.keyMap[L.isMac?"mac":"pc"],w=u.summernote.lang[q.lang],E=R.uniqueId();c.addClass("note-air-editor note-editable");c.attr({id:"note-editor-"+E,contentEditable:!0});var F=document.body,I=u(l(w,q));I.addClass("note-air-layout");I.attr("id","note-popover-"+E);I.appendTo(F);t(I,A);D(I,q);A=u(v());A.addClass("note-air-layout");A.attr("id","note-handle-"+E);A.appendTo(F);w=u(k(w,q));w.addClass("note-air-layout");w.attr("id","note-dialog-"+E);w.find("button.close, a.modal-close").click(function(){u(this).closest(".modal").modal("hide")});
w.appendTo(F)};this.createLayoutByFrame=function(c,q){var A=u('<div class="note-editor"></div>');q.width&&A.width(q.width);0<q.height&&u('<div class="note-statusbar">'+(q.disableResizeEditor?"":'<div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div>')+"</div>").prependTo(A);var w=!c.is(":disabled");w=u('<div class="note-editable" contentEditable="'+w+'"></div>').prependTo(A);q.height&&w.height(q.height);q.direction&&w.attr("dir",
q.direction);w.html(r.html(c)||r.emptyPara);u('<textarea class="note-codable"></textarea>').prependTo(A);w=u.summernote.lang[q.lang];for(var E="",F=0,I=q.toolbar.length;F<I;F++){var N=q.toolbar[F][1];E+='<div class="note-'+q.toolbar[F][0]+' btn-group">';for(var Q=0,h=N.length;Q<h;Q++)u.isFunction(g[N[Q]])&&(E+=g[N[Q]](w,q));E+="</div>"}F=u('<div class="note-toolbar btn-toolbar">'+E+"</div>").prependTo(A);E=q.keyMap[L.isMac?"mac":"pc"];D(F,q);t(F,E,"bottom");F=u(l(w,q)).prependTo(A);D(F,q);t(F,E);
u(v()).prependTo(A);u(k(w,q)).prependTo(A).find("button.close, a.modal-close").click(function(){u(this).closest(".modal").modal("hide")});u('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo(A);A.insertAfter(c);c.hide()};this.noteEditorFromHolder=function(c){return c.hasClass("note-air-editor")?c:c.next().hasClass("note-editor")?c.next():u()};this.createLayout=function(c,q){this.noteEditorFromHolder(c).length||(q.airMode?this.createLayoutByAirMode(c,q):this.createLayoutByFrame(c,
q))};this.layoutInfoFromHolder=function(c){c=this.noteEditorFromHolder(c);if(c.length){c=r.buildLayoutInfo(c);for(var q in c)c.hasOwnProperty(q)&&(c[q]=c[q].call());return c}};this.removeLayout=function(c,q,A){A.airMode?(c.removeClass("note-air-editor note-editable").removeAttr("id contentEditable"),q.popover.remove(),q.handle.remove(),q.dialog.remove()):(c.html(q.editable.html()),q.editor.remove(),c.show())}},Z=new function(){var p=u(window),d=u(document),e=u("html, body"),a=new ea,g=new ha,l=new ia,
v=new ja,f=new ka,m=function(h){h=u(h).closest(".note-editor, .note-air-editor, .note-air-layout");if(!h.length)return null;h=h.is(".note-editor, .note-air-editor")?h:u("#note-editor-"+M.last(h.attr("id").split("-")));return r.buildLayoutInfo(h)},k=function(h,n){a.restoreRange(h);var C=h.data("callbacks");if(C.onImageUpload)C.onImageUpload(n,a,h);else u.each(n,function(z,B){var H=B.name;X.readFileAsDataURL(B).then(function(K){a.insertImage(h,K,H)}).fail(function(){if(C.onImageUploadError)C.onImageUploadError()})})},
t={showLinkDialog:function(h){var n=h.editor(),C=h.dialog(),z=h.editable(),B=a.getLinkInfo(z),H=n.data("options");a.saveRange(z);f.showLinkDialog(z,C,B).then(function(K){a.restoreRange(z);a.createLink(z,K,H);l.hide(h.popover())}).fail(function(){a.restoreRange(z)})},showImageDialog:function(h){var n=h.dialog(),C=h.editable();a.saveRange(C);f.showImageDialog(C,n).then(function(z){a.restoreRange(C);"string"===typeof z?a.insertImage(C,z):k(C,z)}).fail(function(){a.restoreRange(C)})},showVideoDialog:function(h){var n=
h.dialog(),C=h.editable();h=a.getVideoInfo(C);a.saveRange(C);f.showVideoDialog(C,n,h).then(function(z){a.restoreRange(C);a.insertVideo(C,z)}).fail(function(){a.restoreRange(C)})},showHelpDialog:function(h){var n=h.dialog(),C=h.editable();a.saveRange(C);f.showHelpDialog(C,n).then(function(){a.restoreRange(C)})},fullscreen:function(h){var n=h.editor(),C=h.toolbar(),z=h.editable(),B=h.codable();h=n.data("options");var H=function(b){n.css("width",b.w);z.css("height",b.h);B.css("height",b.h);B.data("cmeditor")&&
B.data("cmeditor").setsize(null,b.h)};n.toggleClass("fullscreen");var K=n.hasClass("fullscreen");K?(z.data("orgheight",z.css("height")),p.on("resize",function(){H({w:p.width(),h:p.height()-C.outerHeight()})}).trigger("resize"),e.css("overflow","hidden")):(p.off("resize"),H({w:h.width||"",h:z.data("orgheight")}),e.css("overflow","visible"));g.updateFullscreen(C,K)},codeview:function(h){var n=h.editor(),C=h.toolbar(),z=h.editable(),B=h.codable(),H=h.popover(),K=n.data("options");n.toggleClass("codeview");
if(n=n.hasClass("codeview")){if(B.val(r.html(z,!0)),B.height(z.height()),g.deactivate(C),l.hide(H),B.focus(),L.hasCodeMirror){H=T.fromTextArea(B[0],K.codemirror);if(K.codemirror.tern){var b=new T.TernServer(K.codemirror.tern);H.ternServer=b;H.on("cursorActivity",function(y){b.updateArgHints(y)})}H.setSize(null,z.outerHeight());B.data("cmEditor",H)}}else L.hasCodeMirror&&(H=B.data("cmEditor"),B.val(H.getValue()),H.toTextArea()),z.html(r.value(B)||r.emptyPara),z.height(K.height?B.height():"auto"),g.activate(C),
z.focus();g.updateCodeview(h.toolbar(),n)}},D=function(h){r.isImg(h.target)&&h.preventDefault()},c=function(h){setTimeout(function(){var n=m(h.currentTarget||h.target),C=a.currentStyle(h.target);if(C){var z=n.editor().data("options").airMode;z||g.update(n.toolbar(),C);l.update(n.popover(),C,z);v.update(n.handle(),C,z)}},0)},q=function(h){h=m(h.currentTarget||h.target);l.hide(h.popover());v.hide(h.handle())},A=function(h){var n=h.originalEvent.clipboardData;n&&n.items&&n.items.length&&(h=m(h.currentTarget||
h.target),n=M.head(n.items),"file"===n.kind&&-1!==n.type.indexOf("image/")&&k(h.editable(),[n.getAsFile()]))},w=function(h){if(r.isControlSizing(h.target)){h.preventDefault();h.stopPropagation();var n=m(h.target),C=n.handle(),z=n.popover();h=n.editable();n=n.editor();var B=C.find(".note-control-selection").data("target"),H=u(B),K=H.offset(),b=d.scrollTop(),y=n.data("options").airMode;d.on("mousemove",function(x){a.resizeTo({x:x.clientX-K.left,y:x.clientY-(K.top-b)},H,!x.shiftKey);v.update(C,{image:B},
y);l.update(z,{image:B},y)}).one("mouseup",function(){d.off("mousemove")});H.data("ratio")||H.data("ratio",H.height()/H.width());a.recordUndo(h)}},E=function(h){u(h.target).closest("[data-event]").length&&h.preventDefault()},F=function(h){var n=u(h.target).closest("[data-event]");if(n.length){var C=n.attr("data-event"),z=n.attr("data-value"),B=m(h.target);h.preventDefault();if(-1!==u.inArray(C,["resize","floatMe","removeMedia"])){var H=B.handle().find(".note-control-selection");H=u(H.data("target"))}if(a[C]){var K=
B.editable();K.trigger("focus");a[C](K,z,H)}else t[C]&&t[C].call(this,B);if(-1!==u.inArray(C,["backColor","foreColor"])){var b=B.editor().data("options",b);(b.airMode?l:g).updateRecentColor(M.head(n),C,z)}c(h)}},I=function(h){h.preventDefault();h.stopPropagation();var n=m(h.target).editable(),C=n.offset().top-d.scrollTop(),z=m(h.currentTarget||h.target).editor().data("options");d.on("mousemove",function(B){B=B.clientY-(C+24);B=0<z.minHeight?Math.max(B,z.minHeight):B;B=0<z.maxHeight?Math.min(B,z.maxHeight):
B;n.height(B)}).one("mouseup",function(){d.off("mousemove")})},N=function(h,n){if(n)d.on("drop",function(C){C.preventDefault()});else Q(h)},Q=function(h){var n=u(),C=h.dropzone,z=h.dropzone.find(".note-dropzone-message");d.on("dragenter",function(B){h.editor.hasClass("codeview")||n.length||(h.editor.addClass("dragover"),C.width(h.editor.width()),C.height(h.editor.height()),z.text("Drag Image Here"));n=n.add(B.target)}).on("dragleave",function(B){n=n.not(B.target);n.length||h.editor.removeClass("dragover")}).on("drop",
function(){n=u();h.editor.removeClass("dragover")});C.on("dragenter",function(){C.addClass("hover");z.text("Drop Image")}).on("dragleave",function(){C.removeClass("hover");z.text("Drag Image Here")});C.on("drop",function(B){B.preventDefault();var H=B.originalEvent.dataTransfer;H&&H.files&&(B=m(B.currentTarget||B.target),B.editable().focus(),k(B.editable(),H.files))}).on("dragover",!1)};this.bindKeyMap=function(h,n){var C=h.editor,z=h.editable;h=m(z);z.on("keydown",function(B){var H=[];B.metaKey&&
H.push("CMD");B.ctrlKey&&!B.altKey&&H.push("CTRL");B.shiftKey&&H.push("SHIFT");var K=V.nameFromCode[B.keyCode];K&&H.push(K);if(H=n[H.join("+")])if(B.preventDefault(),a[H])a[H](z,C.data("options"));else t[H]&&t[H].call(this,h);else V.isEdit(B.keyCode)&&a.recordUndo(z)})};this.attach=function(h,n){this.bindKeyMap(h,n.keyMap[L.isMac?"mac":"pc"]);h.editable.on("mousedown",D);h.editable.on("keyup mouseup",c);h.editable.on("scroll",q);h.editable.on("paste",A);h.handle.on("mousedown",w);h.popover.on("click",
F);h.popover.on("mousedown",E);if(!n.airMode&&(N(h,n.disableDragAndDrop),h.toolbar.on("click",F),h.toolbar.on("mousedown",E),!n.disableResizeEditor))h.statusbar.on("mousedown",I);(n.airMode?h.popover:h.toolbar).find(".note-dimension-picker-mousecatcher").css({width:n.insertTableMaxSize.col+"em",height:n.insertTableMaxSize.row+"em"}).on("mousemove",function(z){var B=u(z.target.parentNode),H=B.next(),K=B.find(".note-dimension-picker-mousecatcher"),b=B.find(".note-dimension-picker-highlighted");B=B.find(".note-dimension-picker-unhighlighted");
if(void 0===z.offsetX){var y=u(z.target).offset();var x=z.pageX-y.left;z=z.pageY-y.top}else x=z.offsetX,z=z.offsetY;x=Math.ceil(x/18)||1;z=Math.ceil(z/18)||1;b.css({width:x+"em",height:z+"em"});K.attr("data-value",x+"x"+z);3<x&&x<n.insertTableMaxSize.col&&B.css({width:x+1+"em"});3<z&&z<n.insertTableMaxSize.row&&B.css({height:z+1+"em"});H.html(x+" x "+z)});h.editor.data("options",n);n.styleWithSpan&&!L.isMSIE&&setTimeout(function(){document.execCommand("styleWithCSS",0,!0)},0);h.editable.data("NoteHistory",
new fa);n.onenter&&h.editable.keypress(function(z){if(z.keyCode===V.ENTER)n.onenter(z)});n.onfocus&&h.editable.focus(n.onfocus);n.onblur&&h.editable.blur(n.onblur);n.onkeyup&&h.editable.keyup(n.onkeyup);n.onkeydown&&h.editable.keydown(n.onkeydown);if(n.onpaste)h.editable.on("paste",n.onpaste);n.onToolbarClick&&h.toolbar.click(n.onToolbarClick);if(n.onChange){var C=function(){a.triggerOnChange(h.editable)};if(L.isMSIE)h.editable.on("DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted",C);else h.editable.on("input",
C)}h.editable.data("callbacks",{onChange:n.onChange,onAutoSave:n.onAutoSave,onImageUpload:n.onImageUpload,onImageUploadError:n.onImageUploadError,onFileUpload:n.onFileUpload,onFileUploadError:n.onFileUpload})};this.dettach=function(h,n){h.editable.off();h.popover.off();h.handle.off();h.dialog.off();n.airMode||(h.dropzone.off(),h.toolbar.off(),h.statusbar.off())}};u.fn.extend({summernote:function(p){p=u.extend({},u.summernote.options,p);this.each(function(d,e){var a=u(e);S.createLayout(a,p);var g=
S.layoutInfoFromHolder(a);Z.attach(g,p);r.isTextarea(a[0])&&a.closest("form").submit(function(){a.val(a.code())})});this.first().length&&p.focus&&S.layoutInfoFromHolder(this.first()).editable.focus();if(this.length&&p.oninit)p.oninit();return this},code:function(p){if(void 0===p){var d=this.first();if(!d.length)return;var e=S.layoutInfoFromHolder(d);return e&&e.editable?((d=e.editor.hasClass("codeview"))&&L.hasCodeMirror&&e.codable.data("cmEditor").save(),d?e.codable.val():e.editable.html()):r.isTextarea(d[0])?
d.val():d.html()}this.each(function(a,g){var l=S.layoutInfoFromHolder(u(g));l&&l.editable&&l.editable.html(p)});return this},destroy:function(){this.each(function(p,d){var e=u(d),a=S.layoutInfoFromHolder(e);if(a&&a.editable){var g=a.editor.data("options");Z.dettach(a,g);S.removeLayout(e,a,g)}});return this}})});